#Must be BASE64 encoded
pdns_api_key: {{ services.coreServices.dns.externaldns.powerdnsApiKey | b64encode }}

external-dns:
  pdns:
    apiUrl: "https://powerdns.corp.local"
    apiPort: "443"
    secretName: "external-dns"

  image:
    registry: pullproxy.corp.lan/hub.docker.com

  provider: pdns

  extraVolumeMounts:
    - name: certs
      mountPath: "/etc/ssl/certs/corp-ca.pem"
      subPath: "corp-ca.pem"

  extraVolumes:
    - name: certs
      configMap:
        name: corp-ca

  extraArgs:
    pdns-tls-enabled: false
    tls-ca: /etc/ssl/certs/corp-ca.pem

  domainFilters:
    {%- for filter in services.coreServices.dns.externaldns.domainFilter %}
    - {{ filter.uri }}
    {%- endfor %}
  txtOwnerId: "{{ services.coreServices.dns.externaldns.txtOwnerID|default(name,true) }}"
